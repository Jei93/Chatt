<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Chat con tu amigo</title>
  <style>
    body { font-family: Arial, sans-serif; background: #1e1e1e; color: #fff; display: flex; flex-direction: column; align-items: center; }
    #chat { width: 90%; max-width: 600px; height: 400px; overflow-y: scroll; background: #2e2e2e; padding: 10px; border-radius: 10px; margin-bottom: 10px; }
    .msg { margin: 5px 0; padding: 5px 10px; border-radius: 5px; }
    .yo { background: #0078ff; text-align: right; }
    .otro { background: #444; text-align: left; }
    #input { display: flex; width: 90%; max-width: 600px; }
    input { flex: 1; padding: 10px; border: none; border-radius: 5px 0 0 5px; }
    button { padding: 10px; border: none; background: #0078ff; color: white; border-radius: 0 5px 5px 0; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ðŸ’¬ Chat con tu amigo</h2>
  <div id="chat"></div>
  <div id="input">
    <input id="msg" placeholder="Escribe un mensaje..." />
    <button onclick="enviar()">Enviar</button>
  </div>

  <!-- Firebase Modular SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

    // Tu configuraciÃ³n de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCgiXbMuelJz2QT8-1DH9B6h2F8YA8vle0",
      authDomain: "chat-amigos-d7364.firebaseapp.com",
      databaseURL: "https://chat-amigos-d7364-default-rtdb.firebaseio.com",
      projectId: "chat-amigos-d7364",
      storageBucket: "chat-amigos-d7364.firebasestorage.app",
      messagingSenderId: "294641000709",
      appId: "1:294641000709:web:0d01d2fc90dd6183f9576c",
      measurementId: "G-VHQJEL2E1X"
    };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const chatBox = document.getElementById("chat");
    const nombre = prompt("Escribe tu nombre:");

    // Enviar mensaje
    window.enviar = function() {
      const texto = document.getElementById("msg").value;
      if (texto.trim() !== "") {
        push(ref(db, "chat"), { user: nombre, msg: texto });
        document.getElementById("msg").value = "";
      }
    }

    // Escuchar mensajes nuevos
    onChildAdded(ref(db, "chat"), snapshot => {
      const data = snapshot.val();
      const div = document.createElement("div");
      div.classList.add("msg");
      div.classList.add(data.user === nombre ? "yo" : "otro");
      div.innerText = data.user + ": " + data.msg;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>
</html>
